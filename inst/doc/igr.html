<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Irish Grid References in R</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Irish Grid References in R</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The Irish Grid (<a href="https://epsg.io/29903">EPSG:29903</a>) is a
coordinate reference system spanning the island of Ireland. Created by
the Ordnance Survey Ireland (now <a href="https://www.tailte.ie">Tailte
Éireann</a>) and <a href="https://www.nidirect.gov.uk/campaigns/ordnance-survey-of-northern-ireland">Ordnance
Survey of Northern Ireland</a>, locations within the Irish Grid are
defined by an X and Y coordinate.</p>
<p>Irish grid references are an alternative way of referring to
locations on the Irish Grid. An Irish grid reference consists of a
letter, optionally followed by an easting, northing and possibly a final
letter. The first letter (e.g. “N”) refers to a particular 100 km square
on the Irish Grid. There are 25 such 100 km squares - the letter “I” is
skipped. The easting and northing refer to a square within the 100 km
square. An Irish grid reference with a 1-digit easting and northing
(e.g. “N16”) refers to a particular 10 km square wtihin the 100 km
square “N”. A 5-digit easting and northing (e.g. “N 12345 67890”) refers
to a particular 1 m square. The tetrad form of Irish grid reference
consists of a 10 km square reference followed by a letter (e.g. “N16K”).
This refers to a particular 2 km square. There are 25 tetrads in a 10 km
square - the letter “O” is not used.</p>
<p>There are many R packages facilitating <a href="https://cran.r-project.org/view=Spatial">spatial data analysis and
visualisation</a>. The igr package is designed to simplify using
datasets containing Irish grid references in R. It translates Irish grid
references to and from Irish Grid coordinates (X and Y), or to and from
<a href="https://r-spatial.github.io/sf/">sf</a> (simple feature)
objects that other R packages can work with. The igr package supports
precisions of Irish grid reference from 1 m to 100 km including tetrads,
mixes of precision, and Irish grid references with or without whitespace
between the letters, eastings and northings.</p>
<p>When converting Irish grid references to point locations (using
<code>igr_to_ig()</code>, or <code>st_igr_as_sf()</code> with the
default <code>polygons=FALSE</code>), the south west corners of the
relevant Irish Grid squares are returned by default. The centroids of
the Irish Grid squares can be returned by using
<code>centroids=TRUE</code>. When converting to polygons (using
<code>st_igr_as_sf()</code> with <code>polygons=TRUE</code>), the size
of each polygon is precision-aware.</p>
<p>The functions <code>st_igr_as_sf()</code> and
<code>st_irishgridrefs()</code> convert to and from sf objects in any
coordinate reference system.</p>
</div>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>To install the production version of igr from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;igr&quot;</span>)</span></code></pre></div>
<p>To install the development version of igr from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Install remotes package if needed</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co"># Install development version of igr package from GitHub</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;digitalnature-ie/igr&quot;</span>)</span></code></pre></div>
</div>
<div id="loading-the-package" class="section level2">
<h2>Loading the package</h2>
<p>The igr package is loaded in the normal way:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(igr)</span></code></pre></div>
</div>
<div id="checking-irish-grid-references" class="section level2">
<h2>Checking Irish grid references</h2>
<p>The validity of Irish grid references can be checked with the
function <code>igr_is_valid()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Sample of valid and invalid Irish grid references</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>igrs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A16&quot;</span>, <span class="st">&quot;A123678&quot;</span>, <span class="st">&quot;BAD&quot;</span>, <span class="st">&quot;I12&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;B125&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;N12D&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="fu">igr_is_valid</span>(igrs)</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE</span></span></code></pre></div>
</div>
<div id="converting-from-irish-grid-references" class="section level2">
<h2>Converting from Irish grid references</h2>
<p>To convert a vector of Irish grid references to Irish Grid
coordinates use <code>igr_to_ig()</code>. By default the south west
corners of the Irish grid references are returned.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>igrs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;D12&quot;</span>, <span class="st">&quot;J53&quot;</span>, <span class="st">&quot;M5090&quot;</span>, <span class="st">&quot;N876274&quot;</span>, <span class="st">&quot;S1234550000&quot;</span>, <span class="st">&quot;R10H&quot;</span>, <span class="st">&quot;X&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">igr_to_ig</span>(igrs)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt; $x</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt; $y</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span></code></pre></div>
<p>Alternatively, the centroids of the Irish grid references can be
returned:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">igr_to_ig</span>(igrs, <span class="at">centroids =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; $x</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; [1]  50000.0 315000.0 355000.0 150500.0 287650.0 212345.5 113000.0 250000.0</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt; $y</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt; [1] 450000.0 425000.0 335000.0 290500.0 227450.0 150000.5 105000.0  50000.0</span></span></code></pre></div>
<p>The Irish grid references may have spaces between the grid reference
components:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>ws_igrs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;D 12&quot;</span>, <span class="st">&quot;J 5 3&quot;</span>, <span class="st">&quot;M 50 90&quot;</span>, <span class="st">&quot;N 876 274&quot;</span>, <span class="st">&quot;S 12345 50000&quot;</span>, <span class="st">&quot;R10 H&quot;</span>, <span class="st">&quot;X&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">igr_to_ig</span>(ws_igrs)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; $x</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; $y</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span></code></pre></div>
<p>These sample Irish grid references have a mix of precisions. The
precisions in metres can be returned by supplying a column name for the
precision data:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">igr_to_ig</span>(igrs, <span class="at">precision =</span> <span class="st">&quot;prec&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; $x</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#&gt; $y</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt; $prec</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co">#&gt; [1] 1e+05 1e+04 1e+04 1e+03 1e+02 1e+00 2e+03 1e+05</span></span></code></pre></div>
<p>A list or data.frame of Irish grid references can be converted to an
sf object using <code>st_igr_as_sf()</code>. By default the geometries
returned are points located at the south west corner of each grid
reference, and the coordinate reference system is Irish Grid (<a href="https://epsg.io/29903">EPSG:29903</a>):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>igr_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">igr =</span> igrs)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>points_sf <span class="ot">&lt;-</span> <span class="fu">st_igr_as_sf</span>(igr_df, <span class="st">&quot;igr&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>points_sf</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 350000 ymax: 420000</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt;           igr              geometry</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 1           A       POINT (0 4e+05)</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 2         D12 POINT (310000 420000)</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt; 3         J53 POINT (350000 330000)</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt; 4       M5090 POINT (150000 290000)</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co">#&gt; 5     N876274 POINT (287600 227400)</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co">#&gt; 6 S1234550000 POINT (212345 150000)</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co">#&gt; 7        R10H POINT (112000 104000)</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co">#&gt; 8           X       POINT (2e+05 0)</span></span></code></pre></div>
<p>These points can be plotted by the <a href="https://r-tmap.github.io/tmap/">tmap</a> package. A basic outline
of Ireland and the United Kingdom can be retrieved from the <a href="https://cran.r-project.org/package=maps">maps</a> package.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">requireNamespace</span>(<span class="st">&quot;maps&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">requireNamespace</span>(<span class="st">&quot;tmap&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">requireNamespace</span>(<span class="st">&quot;units&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">library</span>(maps)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">library</span>(tmap)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="fu">library</span>(units)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>  ie_uk_sf <span class="ot">&lt;-</span> maps<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;world&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="at">regions =</span> <span class="fu">c</span>(<span class="st">&quot;Ireland&quot;</span>, <span class="st">&quot;UK&quot;</span>),</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>    <span class="at">plot =</span> <span class="cn">FALSE</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">TRUE</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_as_sf</span>(ie_uk) <span class="sc">|&gt;</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_transform</span>(<span class="dv">29903</span>)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">packageVersion</span>(<span class="st">&quot;tmap&quot;</span>) <span class="sc">&gt;</span> <span class="st">&quot;3.99&quot;</span>) {</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    <span class="fu">tm_shape</span>(points_sf, <span class="at">ext =</span> <span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>      <span class="fu">tm_dots</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a>      <span class="fu">tm_text</span>(<span class="st">&quot;igr&quot;</span>, <span class="at">ymod =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>      <span class="fu">tm_shape</span>(ie_uk_sf) <span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>      <span class="fu">tm_borders</span>()</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a>    <span class="fu">tm_shape</span>(points_sf, <span class="at">ext =</span> <span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>      <span class="fu">tm_dots</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">&quot;cornflowerblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a>      <span class="fu">tm_text</span>(<span class="st">&quot;igr&quot;</span>, <span class="at">ymod =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a>      <span class="fu">tm_shape</span>(ie_uk_sf) <span class="sc">+</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a>      <span class="fu">tm_borders</span>()</span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a>  }</span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="data:image/png;base64,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" alt="A map of Ireland with a dot at the south west corner of each sample grid reference." /></p>
<p>The Irish grid references can also be converted to polygon
geometries. Each polygon spans the full extent of a grid reference, so a
set of grid references of varying precision will result in a set of
polygons with different sizes.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>polygons_sf <span class="ot">&lt;-</span> <span class="fu">st_igr_as_sf</span>(igr_df, <span class="st">&quot;igr&quot;</span>, <span class="at">polygons =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>polygons_sf</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 360000 ymax: 5e+05</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt;           igr                       geometry</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; 1           A POLYGON ((1e+05 5e+05, 1e+0...</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; 2         D12 POLYGON ((320000 430000, 32...</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; 3         J53 POLYGON ((360000 340000, 36...</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; 4       M5090 POLYGON ((151000 291000, 15...</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt; 5     N876274 POLYGON ((287700 227500, 28...</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; 6 S1234550000 POLYGON ((212346 150001, 21...</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt; 7        R10H POLYGON ((114000 106000, 11...</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt; 8           X POLYGON ((3e+05 1e+05, 3e+0...</span></span></code></pre></div>
<p>Plotting these polygons:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">exists</span>(<span class="st">&quot;ie_uk_sf&quot;</span>)) {</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="co"># identify small polygons requiring highlighting</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  polygons_sf<span class="sc">$</span>area <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_area</span>(polygons_sf)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  small_polygons_sf <span class="ot">&lt;-</span> polygons_sf[polygons_sf<span class="sc">$</span>area <span class="sc">&lt;=</span> units<span class="sc">::</span><span class="fu">set_units</span>(<span class="dv">5000000</span>, m<span class="sc">^</span><span class="dv">2</span>), ]</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">packageVersion</span>(<span class="st">&quot;tmap&quot;</span>) <span class="sc">&gt;</span> <span class="st">&quot;3.99&quot;</span>) {</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="fu">tm_shape</span>(ie_uk_sf, <span class="at">bbox =</span> points_sf, <span class="at">ext =</span> <span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>      <span class="fu">tm_borders</span>() <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>      <span class="fu">tm_shape</span>(polygons_sf) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>      <span class="fu">tm_polygons</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">&quot;cornflowerblue&quot;</span>, <span class="at">fill_alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>      <span class="fu">tm_text</span>(<span class="st">&quot;igr&quot;</span>, <span class="at">ymod =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>      <span class="fu">tm_shape</span>(small_polygons_sf) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>      <span class="fu">tm_bubbles</span>(</span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>        <span class="at">fill_alpha =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&quot;orangered&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>,</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>        <span class="at">size =</span> <span class="fl">0.8</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>      )</span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>    <span class="fu">tm_shape</span>(ie_uk_sf, <span class="at">bbox =</span> points_sf, <span class="at">ext =</span> <span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>      <span class="fu">tm_borders</span>() <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>      <span class="fu">tm_shape</span>(polygons_sf) <span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>      <span class="fu">tm_polygons</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">&quot;cornflowerblue&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>      <span class="fu">tm_text</span>(<span class="st">&quot;igr&quot;</span>, <span class="at">ymod =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>      <span class="fu">tm_shape</span>(small_polygons_sf) <span class="sc">+</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a>      <span class="fu">tm_bubbles</span>(</span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="dv">0</span>, <span class="at">border.col =</span> <span class="st">&quot;orangered&quot;</span>, <span class="at">border.lwd =</span> <span class="dv">2</span>,</span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>        <span class="at">size =</span> <span class="fl">0.8</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a>      )</span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a>  }</span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="data:image/png;base64,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" alt="A map of Ireland with polygons spanning each sample grid reference. The polygons range in size from 100 km square to 1 m square." /></p>
</div>
<div id="ignoring-invalid-irish-grid-references" class="section level2">
<h2>Ignoring invalid Irish grid references</h2>
<p>To be consistent with the behaviour of <code>sf::st_as_sf()</code>,
an error is returned if any of the Irish grid references supplied to
<code>st_igr_as_sf()</code> are invalid. To avoid this scenario, any
invalid Irish grid references can be filtered out using
<code>igr_is_valid()</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>some_invalid_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">igr =</span> <span class="fu">c</span>(igrs, <span class="st">&quot;BAD&quot;</span>, <span class="st">&quot;I&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;123&quot;</span>, <span class="st">&quot;N1&quot;</span>))</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>some_invalid_df</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt;            igr</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt; 1            A</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; 2          D12</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt; 3          J53</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt; 4        M5090</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt; 5      N876274</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt; 6  S1234550000</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt; 7         R10H</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt; 8            X</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt; 9          BAD</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt; 10           I</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="co">#&gt; 11            </span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="co">#&gt; 12         123</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co">#&gt; 13          N1</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>valid_sf <span class="ot">&lt;-</span> <span class="fu">st_igr_as_sf</span>(some_invalid_df[<span class="fu">igr_is_valid</span>(some_invalid_df<span class="sc">$</span>igr), , <span class="at">drop =</span> <span class="cn">FALSE</span>])</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>valid_sf</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 350000 ymax: 420000</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="co">#&gt;           igr              geometry</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="co">#&gt; 1           A       POINT (0 4e+05)</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="co">#&gt; 2         D12 POINT (310000 420000)</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="co">#&gt; 3         J53 POINT (350000 330000)</span></span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a><span class="co">#&gt; 4       M5090 POINT (150000 290000)</span></span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a><span class="co">#&gt; 5     N876274 POINT (287600 227400)</span></span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a><span class="co">#&gt; 6 S1234550000 POINT (212345 150000)</span></span>
<span id="cb13-33"><a href="#cb13-33" tabindex="-1"></a><span class="co">#&gt; 7        R10H POINT (112000 104000)</span></span>
<span id="cb13-34"><a href="#cb13-34" tabindex="-1"></a><span class="co">#&gt; 8           X       POINT (2e+05 0)</span></span></code></pre></div>
<p>In tidy r this can be written as:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>valid_sf <span class="ot">&lt;-</span> some_invalid_df <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">igr_is_valid</span>(igr)) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">st_igr_as_sf</span>()</span></code></pre></div>
</div>
<div id="converting-to-irish-grid-references" class="section level2">
<h2>Converting to Irish grid references</h2>
<p>Irish Grid coordinates can be converted to Irish grid references
using <code>ig_to_igr()</code>. The first two columns in the matrix
supplied must be the Irish Grid X coordinate and Y coordinate
respectively. Any other columns are ignored.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">490000</span>, <span class="dv">400000</span>, <span class="dv">0</span>, <span class="dv">453000</span>, <span class="dv">4000</span>), <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">colnames</span>(p) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>p</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt;           x      y</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; [1,]      0 490000</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; [2,] 400000      0</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; [3,] 453000   4000</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p)</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A000900&quot; &quot;Z000000&quot; &quot;Z530040&quot;</span></span></code></pre></div>
<p>Spaces or other strings can be inserted between the letter, easting
and northing:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A 000 900&quot; &quot;Z 000 000&quot; &quot;Z 530 040&quot;</span></span></code></pre></div>
<p>The generated Irish grid references can be limited to a particular
precision by specifying the number of digits for both easting and
northing. Between 0 (for 100 km precision) and 5 (for 1 m precision)
digits are supported.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">digits =</span> <span class="dv">1</span>) <span class="co"># 10 km precision</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A09&quot; &quot;Z00&quot; &quot;Z50&quot;</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">digits =</span> <span class="dv">5</span>) <span class="co"># 1 m precision</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A0000090000&quot; &quot;Z0000000000&quot; &quot;Z5300004000&quot;</span></span></code></pre></div>
<p>Precision can also be specified number of metres. Multiples of 10
from 1 m to 100,000 m (100 km) are supported. Any value supplied for
<code>precision</code> overrides any values for <code>digits</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">precision =</span> <span class="dv">10000</span>) <span class="co"># 10 km precision</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A09&quot; &quot;Z00&quot; &quot;Z50&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">precision =</span> <span class="dv">2000</span>) <span class="co"># 2 km precision - tetrad form</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A09A&quot; &quot;Z00A&quot; &quot;Z50H&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p, <span class="at">precision =</span> <span class="dv">1</span>) <span class="co"># 1 m precision</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A0000090000&quot; &quot;Z0000000000&quot; &quot;Z5300004000&quot;</span></span></code></pre></div>
<p>A data.frame of Irish Grid coordinates can be converted:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>p_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(p)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>p_df</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#&gt;        x      y</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#&gt; 1      0 490000</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">#&gt; 2 400000      0</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">#&gt; 3 453000   4000</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="fu">ig_to_igr</span>(p_df)</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A000900&quot; &quot;Z000000&quot; &quot;Z530040&quot;</span></span></code></pre></div>
<p>An sf object containing geometries of type POINT can be converted to
Irish grid references using <code>st_irishgridrefs()</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>p_sf <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sf</span>(p_df,</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="at">crs =</span> <span class="dv">29903</span>,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>p_sf</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 3 features and 0 fields</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 453000 ymax: 490000</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="co">#&gt;              geometry</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co">#&gt; 1    POINT (0 490000)</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co">#&gt; 2     POINT (4e+05 0)</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="co">#&gt; 3 POINT (453000 4000)</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="fu">st_irishgridrefs</span>(p_sf)</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">#&gt; [1] &quot;A000900&quot; &quot;Z000000&quot; &quot;Z530040&quot;</span></span></code></pre></div>
<p>To append Irish grid references (with spaces) to the original sf
object using base r:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>p_sf<span class="sc">$</span>igr <span class="ot">&lt;-</span> <span class="fu">st_irishgridrefs</span>(p_sf, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>p_sf</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 3 features and 1 field</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co">#&gt; Geometry type: POINT</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 453000 ymax: 490000</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co">#&gt;              geometry       igr</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co">#&gt; 1    POINT (0 490000) A 000 900</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="co">#&gt; 2     POINT (4e+05 0) Z 000 000</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="co">#&gt; 3 POINT (453000 4000) Z 530 040</span></span></code></pre></div>
<p>In tidy r this can be written as:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>p_sf <span class="ot">&lt;-</span> p_sf <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">igr =</span> <span class="fu">st_irishgridrefs</span>(<span class="at">sep =</span> <span class="st">&quot; &quot;</span>))</span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
